<!-- START STYLE -->
<link rel="stylesheet" href="/CSS/profil.css">
<link rel="stylesheet" href="/CSS/PAGES/profil.css">
<!-- END STYLE -->

<!-- START CONTENT -->
<div class="admin-profile-page">
    <div class="admin-profile-container">
        
        <!-- ! START HEADER-->
        <div class="admin-breadcrumb">
            <a href="/listeEmployer" class="breadcrumb-link">
                <i class="fas fa-arrow-left"></i>
                Retour à la liste des employés
            </a>
        </div>
        <!-- ! END HEADER -->

        <!-- ! START PROFILE PICTURE-->
        <div class="admin-profile-header">
            <div class="admin-profile-cover">
                <div class="admin-avatar-wrapper">
                    <img src="/uploads/<%= user_.avatar %>" alt="avatar" class="admin-profile-avatar">
                    <div class="admin-avatar-border"></div>
                    <div class="admin-status-badge <%= user_.isActive ? 'active' : 'inactive' %>">
                        <i class="fas fa-circle"></i>
                        <%= user_.isActive ? 'Actif' : 'Inactif' %>
                    </div>
                </div>
            </div>
            
            <div class="admin-profile-info">
                <h1 class="admin-profile-name">
                    <%= user_.fname %> <%= user_.lname %>
                </h1>
                <p class="admin-profile-position">
                    <i class="fas fa-briefcase"></i>
                    <%= user_.Poste ? user_.Poste.name : 'Non défini' %>
                </p>
            </div>
        </div>
        <!-- ! END PROFILE PICTURE -->

        <!-- ! START BODY -->
        <div class="admin-profile-body">
            <div class="admin-info-cards">

                <!-- TODO: START INFORMATIONS PERSONNELLES -->
                <div class="admin-info-card personal-card">
                    <div class="admin-card-header">
                        <i class="fas fa-user"></i>
                        <h3>Informations personnelles</h3>
                    </div>
                    <div class="admin-card-content">
                        <div class="admin-info-item">
                            <i class="fas fa-envelope"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Email</span>
                                <span class="admin-info-value"><%= user_.email %></span>
                            </div>
                        </div>
                        
                        <div class="admin-info-item">
                            <i class="fas fa-phone"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Téléphone</span>
                                <span class="admin-info-value"><%= user_.phone %></span>
                            </div>
                        </div>

                        <div class="admin-info-item">
                            <i class="fas fa-birthday-cake"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Date de naissance</span>
                                <span class="admin-info-value">
                                    <%= user_.birth_date ? new Date(user_.birth_date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' }) : 'Non renseigné' %>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- TODO: END INFORMATIONS PERSONNELLES -->

                <!-- TODO: START INFORMATIONS ADRESSE -->
                <div class="admin-info-card address-card">
                    <div class="admin-card-header">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Adresse</h3>
                    </div>
                    <div class="admin-card-content">
                        <div class="admin-info-item">
                            <i class="fas fa-home"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Rue</span>
                                <span class="admin-info-value"><%= user_.street %></span>
                            </div>
                        </div>
                        
                        <div class="admin-info-item">
                            <i class="fas fa-city"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Ville</span>
                                <span class="admin-info-value"><%= user_.city %></span>
                            </div>
                        </div>
                        
                        <div class="admin-info-item">
                            <i class="fas fa-mail-bulk"></i>
                            <div class="admin-info-details">
                                <span class="admin-info-label">Code postal</span>
                                <span class="admin-info-value"><%= user_.cp %></span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- TODO: END INFORMATIONS ADRESSE -->

                <!-- TODO: START INFORMATIONS OBSERVATIONS -->
                <div class="admin-info-card observations-card full-width">
                    <div class="admin-card-header">
                        <i class="fas fa-sticky-note"></i>
                        <h3>Observations</h3>
                    </div>
                    <div class="admin-card-content">
                        <div class="admin-observation-content">
                            <%= user_.observation || 'Aucune observation' %>
                        </div>
                    </div>
                </div>
                <!-- TODO: END INFORMATIONS OBSERVATIONS -->
            </div>

            <!-- TODO: START ACTIONS -->
            <div class="admin-profile-actions">
                <a href="/updateEmployee/<%= user_.id_employee %>" class="admin-btn edit-btn">
                    <i class="fas fa-edit"></i>
                    <span>Modifier</span>
                </a>
                
                <form action="/deactivate/<%= user_.id_employee %>" method="POST" class="admin-action-form" 
                      onsubmit="return confirm('Êtes-vous sûr de vouloir désactiver cet employé ? Il n\'aura plus accès au site.')">
                    <button type="submit" class="admin-btn deactivate-btn">
                        <i class="fas fa-user-slash"></i>
                        <span><%= user_.isActive ? 'Désactiver' : 'Réactiver' %></span>
                    </button>
                </form>
            </div>
            <!-- TODO: END ACTIONS -->
        </div>
        <!-- ! END BODY -->
    </div>
</div>
<!-- END CONTENT -->